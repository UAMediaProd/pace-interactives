<template>
  <div class="text-center">
    <div class="text-xl font-bold">Making War Planes Safer</div>
    <div></div>
  </div>
  <div class="md:flex w-full my-6">
    <div class="w-full md:w-2/5 p-4">
      <div class="flex w-full border-b border-slate-200 mb-4">
        <div v-for="m in Object.keys(modes)" class="text-center w-1/3 cursor-pointer" :class="{'border-b-2': currentMode === m}" :style="{borderColor: modes[m].colour}" @click="currentMode = m">
          <div>
            <i :class="`${currentMode === m ? 'fas' : 'fal'} ${modes[m].icon}`" :style="{color: currentMode === m ? modes[m].colour : '#ccc'}" class="text-3xl" />
          </div>
          <div class="text-sm -mt-1" :class="currentMode === m ? 'text-primary-darker' : 'text-gray-400'">{{ m }}</div>
        </div>
      </div>
      <div v-for="loc in planeLocations" class="w-full">
        <div v-if="loc.modes.includes(currentMode)" class="w-full flex justify-center">
          <label :for="loc.name" class="w-[100px] pl-1.5">{{ loc.display }}</label>
          <span class="w-[21px] text-right">{{ inputs[loc.name] / 10 }}</span>
          <input :id="loc.name" min="0" :max="modes[currentMode].inputMax * 10" step="1" v-model="inputs[loc.name]" type="range" class="grow ml-4 mr-1.5" :class="modes[currentMode].accent" />
        </div>
      </div>

      <div class="flex justify-center mt-4 mx-auto w-10/12 rounded border text-white font-bold overflow-hidden shadow-md active:shadow-sm" :style="{backgroundColor: modes[currentMode].colour}">
        <button @click="getResults" class="w-full py-2 hover:bg-[#00000019] active:bg-[#00000033] uppercase">Send the Planes
          <i class="fas fa-chevron-double-right text-sm my-auto" /></button>
      </div>
    </div>
    <div class="w-full md:w-3/5 flex flex-col p-2">
      <div class="mx-auto">
        <div>You're adding {{ extraArmour }} extra kilograms of armour to each plane.</div>
        <div>Out of {{ squadronSize }} planes, {{ numReturned }} have returned.</div>
        <div>You have observed {{ numHits }} bullet marks in total on the returned planes.</div>

        <div>That's an average of {{ numReturned ? hitsPerPlane : 'n/a' }} per plane.</div>


      </div>
      <div class="w-full mt-8 py-4 relative ml-4">
        <svg class="w-10/12 mx-auto" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1743.99 862.02">
          <defs>
            <clipPath id="clippath">
              <path class="cls-61" fill="#7b9aa9" d="M1295.12,299.71s-195.91-117.95-143.86-128.66c52.05-10.72,256.78,108.27,277.09,116.39,0,0-56.46,23.39-133.22,12.27Z" />
            </clipPath>
            <clipPath id="clippath-1">
              <path class="cls-62" fill="#97afbb" d="M349.67,451.67S-17.94,72.81,40.33,59.88c89.32-19.82,313.45-5.82,692.71,320.95,0,0-67.45,87.73-383.37,70.83Z" />
            </clipPath>
            <clipPath id="clippath-2">
              <path class="cls-57" fill="#678580" d="M363.8,233.69s31.39-27,75.88-.81c0,0-26.43,16.72-75.88.81Z" />
            </clipPath>
            <clipPath id="clippath-3">
              <path class="cls-57" fill="#678580" d="M381.09,245.17s31.39-27,75.88-.81c0,0-26.43,16.72-75.88.81Z" />
            </clipPath>
            <clipPath id="clippath-4">
              <path class="cls-62" fill="#97afbb" d="M371.66,294.48s130.92-4.49,299.69-9.14c246.35-6.8,548.03-15.46,579.57-17.04,53.14-2.67,115.51-162.66,141.61-197.48,26.1-34.82,95.27-64.12,106.9,21.71,11.63,85.83-11.62,217.86-21.87,243.56-10.25,25.69-580.83,160.17-643.32,167.49-62.5,7.32-434.77,52.12-496.18,43.35-61.41-8.76-280.05-80.47-277.64-120.25,2.83-46.86,169.34-131.77,311.25-132.2Z" />
            </clipPath>
            <clipPath id="clippath-5">
              <path class="cls-60" fill="#637f76" d="M1529.52,130.24c-46.23-6.99-96.76,13.29-129.65,45.05-7.3,7.05-11.19,16.27-17.75,23.85-12.27,14.18-29.18,24.6-44.57,35.01-9.09,6.14-63,37.25-70.9,19.8-12.35-27.3,31.56-81.58,45.18-102.45,21.52-32.98,69.28-120.95,100.25-142.35,12.96-8.96,26.2-8.95,41.72-8.93,14.77.02,32.83-1.55,47,3.47,33.52,11.89,37.88,65.67,37.63,95.34-.06,6.49-8.91,31.22-8.91,31.22Z" />
            </clipPath>
            <clipPath id="clippath-6">
              <path class="cls-58" fill="#6d5e4e" d="M445.38,413.67l29.95-.66-5.54,16.8s-18.68-4.4-24.41-16.14Z" />
            </clipPath>
            <clipPath id="clippath-7">
              <path class="cls-58" fill="#6d5e4e" d="M418.02,414.68l29.95-.67-5.54,16.8s-18.68-4.39-24.41-16.14Z" />
            </clipPath>
            <clipPath id="clippath-8">
              <path class="cls-58" fill="#6d5e4e" d="M391.15,414.97l29.95-.66-5.54,16.8s-18.68-4.4-24.41-16.14Z" />
            </clipPath>
            <clipPath id="clippath-9">
              <path class="cls-58" fill="#6d5e4e" d="M365.47,415.94l29.95-.67-5.54,16.8s-18.68-4.39-24.41-16.14Z" />
            </clipPath>
            <clipPath id="clippath-10">
              <path class="cls-58" fill="#6d5e4e" d="M339.1,416.6l29.95-.66-5.54,16.8s-18.68-4.39-24.41-16.14Z" />
            </clipPath>
            <clipPath id="clippath-11">
              <path class="cls-58" fill="#6d5e4e" d="M314.64,416.21l29.95-.67-5.54,16.8s-18.68-4.39-24.41-16.14Z" />
            </clipPath>
            <clipPath id="clippath-12">
              <path class="cls-59" fill="#9ba3af" d="M291.96,369.14s209.28-7.46,232.05-7.8c22.78-.34,34.33,7.97,34.29,25.66-.04,17.69-15.53,18.81-41.3,23.08-25.77,4.26-170.79,5.23-211.59,9.34-40.81,4.11-42.55-4.48-41.9-23.34.78-23.06,28.45-26.94,28.45-26.94Z" />
            </clipPath>
            <clipPath id="clippath-13">
              <path class="cls-53" fill="#88a3b1" d="M441.22,542.78c9.31-11.85,72.1-21.12,189.41-33.88,72.6-7.9,163.4-28.06,260.58-4.95,81.2,19.31,147.45,72.2,229.05,128.89,103.71,72.05,220.79,168.63,181.9,204.15-68.27,62.33-368.95-44.59-558.56-132-189.61-87.41-302.37-162.19-302.37-162.19Z" />
            </clipPath>
            <clipPath id="clippath-14">
              <path class="cls-57" fill="#678580" d="M814.84,605s29.22-29.33,75.59-6.64c0,0-25.07,18.7-75.59,6.64Z" />
            </clipPath>
            <clipPath id="clippath-15">
              <path class="cls-57" fill="#678580" d="M848.74,614.78s29.22-29.34,75.59-6.64c0,0-25.07,18.7-75.59,6.64Z" />
            </clipPath>
            <clipPath id="clippath-16">
              <path class="cls-54" fill="#465" d="M695.18,285.66s63.79-74.66,153.33-57.06c89.54,17.61,100.74,45.68,114.68,59.67,0,0-100.51,34.86-178.6,28.36-69.86-5.82-89.41-30.97-89.41-30.97Z" />
            </clipPath>
            <clipPath id="clippath-17">
              <path class="cls-62" fill="#97afbb" d="M733.24,299.7l39.2-43.28,14.76-4.68,10.91,60.29s-36.72,1.93-64.87-12.33Z" />
            </clipPath>
            <clipPath id="clippath-18">
              <path class="cls-62" fill="#97afbb" d="M784.44,239.47l8.91,11.28,13.84,60.25s114.61-10.33,140.72-26.99l-2.35-9.43s-2.02-2.08-6.19-5.33c-11.46-8.94-39.14-26.77-85.52-34.75-63.25-10.87-69.4,4.97-69.4,4.97Z" />
            </clipPath>
            <clipPath id="clippath-19">
              <path class="cls-56" fill="#787878" d="M816.86,245.88c8.58-4,22.94-.12,22.88,14.48-.05,14.6-3.18,15.47-3.18,15.47l13.08,14.13-.44,11.58-44.89,7.07-14.57-9.79,3.43-9.57s16.42-7.32,23.4-11.3l1.3-3.67s-7.7-.35-7.53-3.59c.17-3.24-2.73-20.5,6.52-24.81Z" />
            </clipPath>
            <clipPath id="clippath-20">
              <path class="cls-61" fill="#7b9aa9" d="M1308,304.34s107.18-28.15,164.33.01c46.43,22.88,160.97,65.86,118.34,70.51-42.64,4.64-156.31-5.97-282.66-70.52Z" />
            </clipPath>
            <clipPath id="clippath-21">
              <path class="cls-55" fill="#dadada" d="M170.13,333.57s59.34,83.85-1.19,171.06c0,0-129.09-38.02-128.65-81.78.47-47.32,103.12-84.75,129.84-89.28Z" />
            </clipPath>
          </defs>
          <g class="cls-64" isolation="isolate">
            <g id="Layer_2">
              <g id="Layer_1-2" data-name="Layer_1">
                <g>
                  <g>
                    <path class="cls-7" fill="#7b9aa9" d="M1295.12,299.71s-195.91-117.95-143.86-128.66c52.05-10.72,256.78,108.27,277.09,116.39,0,0-56.46,23.39-133.22,12.27Z" />
                    <g class="cls-87" clip-path="url(#clippath)">
                      <path class="cls-46" fill="#90aab7" d="M1149.25,163.1s-28.41,18.17,118.64,103.02l99.75-22.8s-183.45-90.29-218.39-80.22Z" />
                    </g>
                  </g>
                  <g>
                    <g>
                      <path class="cls-5" fill="#97afbb" d="M349.67,451.67S-17.94,72.81,40.33,59.88c89.32-19.82,313.45-5.82,692.71,320.95,0,0-67.45,87.73-383.37,70.83Z" />
                      <g class="cls-77" clip-path="url(#clippath-1)">
                        <path class="cls-29" fill="#57766c" d="M512.11,308.92c-8.27-3.49-16.62-12.03-24-17.07-45.46-31.08-93.79-86.57-153.85-75.86-62.6,11.16-120.17,9.76-183.32,2.66-18.69-2.1-40.6-2.27-58.17-9.65-9.88-4.15-17.59-13.12-22.08-22.66-9.88-21.01-1.6-27.48,18.62-35.89,34.84-14.5,72.11-8.18,108.41-3.1,18.77,2.63,37.49,7.04,56.53,6.67,13.39-.26,26.76-4.49,40.14-3.25,24.37,2.26,48.4,14.16,71.56,21.38,23.62,7.37,48.47,11.97,72.87,15.79,23.15,3.63,72.92,2.59,92.83,14.79,11.03,6.76,15.56,19.72,26.38,27.39,10.09,7.16,127.63,66.12,58.4,81.32-7.1,1.56-14.25,2.88-21.44,3.96-9.78,1.46-19.72,2.14-29.6,2.13-17.11-.02-33.8-2.74-50.6-5.66" />
                        <path class="cls-48" fill="#577668" d="M12.04,70.33c.28.84,4.36.2,4.89.17,13.79-.86,27.5-1.52,41.32-.95,30.84,1.27,60.33,7.9,89.94,16.12,32.83,9.12,70.67,25.34,105.22,25.7,7.94.08,54.94-5.7,52.76-17.52-3.36-18.22-55.53-38.11-69.71-43.87C179.63,26.89,127.21,13.42,65.77,21.17c-14.95,1.89-43.82.58-52.68,16.13-6.33,11.12,2.77,16.5,1.78,25.57" />
                        <path class="cls-41" fill="#ffda7b" d="M39.38,52.31c-12.76,1.35,37.28,97.25,143.04,204.52l-11.28,15.2S30.18,113.72,27.4,69.69l11.98-17.38Z" />
                      </g>
                    </g>
                    <path class="cls-17" fill="#c2d0d7" opacity=".26" mix-blend-mode="overlay" d="M87.19,71.43s120.03-50.25,416.55,173.07c0,0-170.98,43.37-269.12-10.25C136.48,180.62,63.13,92.16,87.19,71.43Z" />
                    <g>
                      <path class="cls-31" fill="#000876" opacity=".8" d="M214.79,100.83c38.48,6.65,66.89,28.42,63.4,48.58-3.49,20.16-37.55,31.13-76.03,24.48-38.48-6.65-66.89-28.42-63.4-48.58,3.49-20.16,37.55-31.13,76.03-24.48Z" />
                      <path class="cls-37" fill="#fff" opacity=".8" d="M213.63,111.86c28.34,4.9,49.36,20.35,46.92,34.49-2.44,14.14-27.44,21.64-55.78,16.74-28.34-4.9-49.36-20.35-46.92-34.49,2.44-14.14,27.43-21.64,55.77-16.74Z" />
                      <path class="cls-27" fill="#c30000" opacity=".8" d="M212.19,123.41c15.36,2.65,26.76,11.03,25.43,18.7-1.32,7.67-14.87,11.73-30.24,9.08-15.36-2.65-26.76-11.03-25.43-18.7,1.32-7.67,14.87-11.73,30.24-9.08Z" />
                    </g>
                    <g>
                      <g>
                        <path class="cls-40" fill="#678580" d="M363.8,233.69s31.39-27,75.88-.81c0,0-26.43,16.72-75.88.81Z" />
                        <g class="cls-80" clip-path="url(#clippath-2)">
                          <path class="cls-30" fill="#526d69" d="M399.94,219.41s13.48,7.27,17.24,23.97c0,0,21.54-3.81,27.47-10.54,0,0-19.43-13.28-44.71-13.43Z" />
                          <path class="cls-25" fill="silver" d="M364.98,239.31c.23-1.71,35.89-29.88,76.4-.54l5.63-4.71s-10.99-17.2-45.18-16.08c-34.19,1.12-43.14,16.61-43.14,16.61l6.29,4.72Z" />
                        </g>
                      </g>
                      <g>
                        <path class="cls-40" fill="#678580" d="M381.09,245.17s31.39-27,75.88-.81c0,0-26.43,16.72-75.88.81Z" />
                        <g class="cls-78" clip-path="url(#clippath-3)">
                          <path class="cls-30" fill="#526d69" d="M417.23,230.89s13.48,7.27,17.24,23.97c0,0,21.54-3.81,27.47-10.54,0,0-19.43-13.28-44.71-13.43Z" />
                          <path class="cls-25" fill="silver" d="M382.28,250.79c.23-1.71,35.89-29.88,76.4-.54l5.63-4.71s-10.99-17.2-45.18-16.08c-34.19,1.12-43.14,16.61-43.14,16.61l6.29,4.72Z" />
                        </g>
                      </g>
                    </g>
                    <g>
                      <path class="cls-22" fill="#a1a1a1" fill-rule="evenodd" d="M223.64,298.45s-79.47.43-128.31,7.21c0,0,62.32,5.46,134.18,5.94,0,0,15.01-7.13-5.87-13.15Z" />
                      <path class="cls-22" fill="#a1a1a1" fill-rule="evenodd" d="M209.47,280.61s-39.81,4-88.65,10.78c0,0,22.67,1.89,94.53,2.37,0,0,15.01-7.13-5.87-13.15Z" />
                      <path class="cls-21" fill="#c9c6bd" d="M121.77,291.55l98.45-5.14s-4.58-5.65-9.09-6.34c-4.51-.68-89.36,11.47-89.36,11.47Z" />
                      <path class="cls-21" fill="#c9c6bd" d="M96.9,305.67s131.84-1.76,138.05-1.13c0,0,.63-5.41-13.64-6-46.78-1.93-124.41,7.13-124.41,7.13Z" />
                    </g>
                  </g>
                  <g>
                    <g>
                      <path class="cls-5" fill="#97afbb" d="M371.66,294.48s130.92-4.49,299.69-9.14c246.35-6.8,548.03-15.46,579.57-17.04,53.14-2.67,115.51-162.66,141.61-197.48,26.1-34.82,95.27-64.12,106.9,21.71,11.63,85.83-11.62,217.86-21.87,243.56-10.25,25.69-580.83,160.17-643.32,167.49-62.5,7.32-434.77,52.12-496.18,43.35-61.41-8.76-280.05-80.47-277.64-120.25,2.83-46.86,169.34-131.77,311.25-132.2Z" />
                      <g class="cls-79" clip-path="url(#clippath-4)">
                        <path class="cls-42" fill="#526e60" d="M687.49,271.49c-7.58-1.15-19.43,4.13-26.34,6.45-12.33,4.15-38.83,15.28-40.8,30.81-1.2,9.41,12.39,18.15,15.71,26.41,10.48,26.13-.4,62.35-26.5,75.01-17.08,8.29-36.62,7.81-53.41,17.84-17.37,10.38-28.54,30.18-47.26,38.12-29.2,12.39-60.5,15.59-88.06,32.51-7.94,4.87-51.66,43.09-32.64,53.05,27.22,14.26,84.23,9.52,113.55,6.18,54.56-6.21,100.08-28.52,150.28-36.56,51.39-8.24,103.2-1.7,153.8-15.18,28.34-7.55,75.21-8.59,97.03-30.53,12.95-13.02,17.41-34.37,23.27-51.18,15.85-45.46,39.92-82.37,69.82-119.34,11.51-14.23,20.57-25.12,10.08-43.22-11.64-20.09-50.77-23.26-70.48-27.33-82.32-16.98-149.7-1.67-225.93,30.26l-22.12,6.69Z" />
                        <path class="cls-49" fill="#5c7a6c" d="M1086.3,244.33c12.4,5.13,16.27,54.25,11.31,65.19-9.49,20.93-32.63,25.69-45.81,42.83-14.36,18.68-12.85,44.38-28.52,63.36-12.21,14.79-36.3,46-10.71,58.52,17.24,8.44,34.99,6.03,52.49-.49,22.46-8.37,42.59-23.62,65.03-31.32,9.6-3.3,21.09-2.27,31.09-3.73,26.77-3.9,53.95-19.34,68.99-41.98,19.31-29.07,34.31-85.78,4.44-112.34-36.56-32.51-86.18-33.75-131.28-40.57l-17.03.52Z" />
                        <polygon class="cls-32" fill="#637f46" points="1560.75 761.13 1695.74 838.44 1742.2 688.24 1613.82 612.82 1560.75 761.13" />
                        <polygon class="cls-63" fill="none" stroke="#637f46" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.59px" points="1560.75 761.13 1695.74 838.44 1742.2 688.24 1613.82 612.82 1560.75 761.13" />
                        <path class="cls-44" fill="#4c6758" d="M372.06,282.82c-30.23,12.44-66.73,20.19-87.44,48.07-9.76,13.14,6.39,37.48,2.6,53.3-4.04,16.9-14.7,15.15-24.05,24.56-5.75,5.79-7.81,14.69-13.14,20.98-11.15,13.12-25.74,24.03-38.29,35.78-7.26,6.79-20.8,20.63-32.04,18.08-11.76-2.67-18.81-26.75-22.48-35.92-15.04-37.6-25.01-95.11-5.5-132.83,40.8-78.86,134.9-97.94,214.81-82.91,16.11,3.03,34.54,4.68,49.47,12.22" />
                        <g>
                          <path class="cls-33" fill="#637f76" d="M1529.52,130.24c-46.23-6.99-96.76,13.29-129.65,45.05-7.3,7.05-11.19,16.27-17.75,23.85-12.27,14.18-29.18,24.6-44.57,35.01-9.09,6.14-63,37.25-70.9,19.8-12.35-27.3,31.56-81.58,45.18-102.45,21.52-32.98,69.28-120.95,100.25-142.35,12.96-8.96,26.2-8.95,41.72-8.93,14.77.02,32.83-1.55,47,3.47,33.52,11.89,37.88,65.67,37.63,95.34-.06,6.49-8.91,31.22-8.91,31.22Z" />
                          <g class="cls-85" clip-path="url(#clippath-5)">
                            <path class="cls-26" fill="#a0b1a9" d="M1267.51,262.92l21.52-7.72s57.9-78.7,74.21-112.06c16.31-33.35,40.23-96.27,92.9-100.27l18.88-4.57s-24.58-17.13-60.67,4.49c-36.09,21.62-67.79,103.53-82.31,127.25-14.52,23.72-63.39,82.91-63.39,82.91l-1.15,9.96Z" />
                          </g>
                        </g>
                        <path class="cls-12" fill="#2a5347" opacity=".32" mix-blend-mode="multiply" d="M170.36,475.23s173.92,58.27,258.92,48.53c85-9.73,429.57-61.05,478.49-62.08,48.91-1.03,485.02-91.08,517.89-103.75,32.87-12.67-108.96-14.06-174.63-14.26-65.67-.2-676.91,62.81-756.64,64.29-79.73,1.47-322.73,18.94-326,36.27-3.28,17.33,1.97,31,1.97,31Z" />
                        <path class="cls-36" fill="#fff" opacity=".42" d="M155.85,360.34s48.86-25.66,156.59-41.87c99.07-14.9,248.61-20.31,440.48-23.6,400.53-6.87,527.28-20.58,527.28-20.58,0,0,9.3-7.53-37.61-11.91-46.91-4.37-762.44,23.24-829.77,22.84-67.34-.4-207.17,25.04-256.69,46.16l-.28,28.96Z" />
                        <path class="cls-16" fill="#e7e7e7" opacity=".51" d="M1191.01,262.73c5.66,7.9,75.04,67.88,11.16,163.7l78.52-14.96s48.59-103.8-11.53-151.3c0,0-78.29,2.36-78.15,2.55Z" />
                        <polygon class="cls-7" fill="#7b9aa9" points="1464.33 59.11 1414.62 294.23 1421.85 294.92 1470.37 62.59 1464.33 59.11" />
                        <g>
                          <path class="cls-31" fill="#000876" opacity=".8" d="M1144.55,300.69c17.8-2.45,37.3,6.61,46.42,25.2,3.54,7.21,5.26,15.5,5.48,23.72.29,11.08-2.09,22.26-6.62,31.95-2.77,5.94-6.41,11.38-10.87,15.75-7.52,7.36-17.13,11.71-26.98,12.57-10.03.88-20.07-2.35-28.66-8.45-4.45-3.16-8.58-7.08-11.57-12.08-4.18-6.99-6.27-15.4-6.77-23.79-.38-6.26.02-12.57,1.14-18.69.64-3.5,1.57-6.9,2.47-10.31,2.3-8.68,5.49-17.27,11.29-23.55,6.65-7.2,15.68-11.07,24.66-12.31Z" />
                          <path class="cls-37" fill="#fff" opacity=".8" d="M1147.47,318.03c8.25-1.12,16.79,1.15,23.88,6.28,3.88,2.81,7.33,6.5,9.73,11.04,2.65,5.02,3.94,10.87,4.12,16.69.42,13.22-4.51,27.35-13.88,35.14-5.44,4.52-12.09,6.89-18.75,7.48-11.5,1.02-23.88-4.25-30.65-15.54-.94-1.56-1.75-3.23-2.41-4.97-1.36-3.6-2.1-7.48-2.35-11.38-.6-9.16,1.45-18.29,5.47-26.11,2.2-4.27,4.96-8.19,8.39-11.19,4.74-4.15,10.53-6.65,16.44-7.45Z" />
                          <path class="cls-27" fill="#c30000" opacity=".8" d="M1150.19,336.25c6.88-.85,14.23,2.54,17.99,9.53.64,1.18,1.16,2.45,1.55,3.77.5,1.7.79,3.48.88,5.26.09,1.92-.05,3.84-.41,5.71-.3,1.58-.76,3.13-1.36,4.59-2.92,7.1-9.16,12.03-15.93,12.73-6.78.7-13.76-2.95-17.54-9.63-.7-1.24-1.29-2.58-1.74-3.97-.53-1.63-.87-3.34-1.01-5.07-.14-1.78-.08-3.59.2-5.35.22-1.43.59-2.82,1.08-4.15,2.76-7.52,9.34-12.57,16.29-13.42Z" />
                        </g>
                        <g>
                          <g>
                            <path class="cls-23" fill="#6d5e4e" d="M445.38,413.67l29.95-.66-5.54,16.8s-18.68-4.4-24.41-16.14Z" />
                            <g class="cls-82" clip-path="url(#clippath-6)">
                              <path class="cls-11" fill="#eaf7de" opacity=".4" d="M449.39,410.11s8.99,11.33,25.77,13.19l-1.55,6.2s-17.74-2.15-28.12-16.6l3.91-2.79Z" />
                            </g>
                          </g>
                          <g>
                            <path class="cls-23" fill="#6d5e4e" d="M418.02,414.68l29.95-.67-5.54,16.8s-18.68-4.39-24.41-16.14Z" />
                            <g class="cls-81" clip-path="url(#clippath-7)">
                              <path class="cls-11" fill="#eaf7de" opacity=".4" d="M422.03,411.12s8.98,11.33,25.77,13.19l-1.55,6.2s-17.74-2.15-28.13-16.6l3.91-2.79Z" />
                            </g>
                          </g>
                          <g>
                            <path class="cls-23" fill="#6d5e4e" d="M391.15,414.97l29.95-.66-5.54,16.8s-18.68-4.4-24.41-16.14Z" />
                            <g class="cls-84" clip-path="url(#clippath-8)">
                              <path class="cls-11" fill="#eaf7de" opacity=".4" d="M395.16,411.41s8.99,11.33,25.77,13.19l-1.55,6.2s-17.74-2.15-28.12-16.6l3.91-2.79Z" />
                            </g>
                          </g>
                          <g>
                            <path class="cls-23" fill="#6d5e4e" d="M365.47,415.94l29.95-.67-5.54,16.8s-18.68-4.39-24.41-16.14Z" />
                            <g class="cls-83" clip-path="url(#clippath-9)">
                              <path class="cls-11" fill="#eaf7de" opacity=".4" d="M369.47,412.38s8.99,11.33,25.77,13.19l-1.55,6.2s-17.74-2.15-28.12-16.6l3.91-2.79Z" />
                            </g>
                          </g>
                          <g>
                            <path class="cls-23" fill="#6d5e4e" d="M339.1,416.6l29.95-.66-5.54,16.8s-18.68-4.39-24.41-16.14Z" />
                            <g class="cls-70" clip-path="url(#clippath-10)">
                              <path class="cls-11" fill="#eaf7de" opacity=".4" d="M343.1,413.05s8.99,11.33,25.77,13.18l-1.55,6.2s-17.74-2.15-28.12-16.6l3.91-2.78Z" />
                            </g>
                          </g>
                          <g>
                            <path class="cls-23" fill="#6d5e4e" d="M314.64,416.21l29.95-.67-5.54,16.8s-18.68-4.39-24.41-16.14Z" />
                            <g class="cls-67" clip-path="url(#clippath-11)">
                              <path class="cls-11" fill="#eaf7de" opacity=".4" d="M318.65,412.66s8.98,11.33,25.77,13.19l-1.55,6.2s-17.74-2.15-28.13-16.6l3.91-2.79Z" />
                            </g>
                          </g>
                          <g>
                            <path class="cls-19" fill="#9ba3af" d="M291.96,369.14s209.28-7.46,232.05-7.8c22.78-.34,34.33,7.97,34.29,25.66-.04,17.69-15.53,18.81-41.3,23.08-25.77,4.26-170.79,5.23-211.59,9.34-40.81,4.11-42.55-4.48-41.9-23.34.78-23.06,28.45-26.94,28.45-26.94Z" />
                            <g class="cls-74" clip-path="url(#clippath-12)">
                              <path class="cls-24" fill="#244447" opacity=".57" d="M299.16,387.88s208.03-11.65,230.69-12.49c22.67-.84,34.64,6.52,35.58,22.73.94,16.21-14.43,17.6-39.86,22.1-25.43,4.5-169.81,8.72-210.23,13.42-40.42,4.7-42.62-3.13-43.03-20.42-.5-21.14,26.85-25.34,26.85-25.34Z" />
                              <path class="cls-38" fill="#4d7961" opacity=".71" d="M290.79,363.42c.66.1,1.63,2.94,1.83,3.43,1.68,4.08,1.71,8.44-.22,12.43-4.38,9.07-12.77,13.02-19.26,20.14-2.7,2.96-3.84,7.97-7.35,10.07-2.83,1.7-10.11,1.99-12.67-.3-3.13-2.79-1.61-11.49-1.41-14.93.5-8.87,1.19-19.46,7.55-26.32,3.28-3.54,7.84-6.01,12.12-8.12,1.18-.58,2.38-1.15,3.61-1.65,1.04-.43,2.11-.78,3.19-1.12.96-.31,1.93-.6,2.91-.83,2.41-.56,9.52-1.5,10.39,2.19.23.98-.68,5-.68,5Z" />
                            </g>
                          </g>
                        </g>
                      </g>
                    </g>
                    <path class="cls-28" fill="#436052" d="M1042.68,458.83s-62.95,22.68-77.96,75.35c0,0-287.35-46.69-287.34-46.34.01.36,288.48-32.2,365.3-29.01Z" />
                  </g>
                  <g>
                    <g>
                      <path class="cls-3" fill="#88a3b1" d="M441.22,542.78c9.31-11.85,72.1-21.12,189.41-33.88,72.6-7.9,163.4-28.06,260.58-4.95,81.2,19.31,147.45,72.2,229.05,128.89,103.71,72.05,220.79,168.63,181.9,204.15-68.27,62.33-368.95-44.59-558.56-132-189.61-87.41-302.37-162.19-302.37-162.19Z" />
                      <g class="cls-72" clip-path="url(#clippath-13)">
                        <path class="cls-52" fill="#617973" d="M1037.91,534.03c-49.41-7.47-144.02-27.75-189.58-17.35-52.81,12.06-22.7,55-56.71,66.55-12.3,4.18-27.59,2.23-39.01,8.34-5.82,3.11-7.54,9.55-11.75,14.24-8.74,9.72-23.49,17.61-35.64,22.02-30.17,10.94-151.21,25.12-192.33,4.04-12.33-6.32-19.65-22.45-31.21-30.88-17.9-13.06-63.21-40.39-60.63-65.51,1.38-13.44,21.25-25.75,31.14-32.11,37.3-24.01,81.15-31.18,124.54-35.4,39.39-3.83,78.88-5.8,118.3-9.24,36.02-3.14,72.35-9.28,108.57-7.19,51.62,2.98,101.62,17.44,152.07,27.73,23.93,4.88,103.47,12.46,121.37,27.25l-39.14,27.51Z" />
                        <path class="cls-50" fill="#5d786c" d="M1054.7,545.75c-12.71-1.92-33.51,7.62-45.85,10.42-11.03,2.5-22.31,4.48-33.19,7.58-10.43,2.96-15.43,9.31-23.16,15.97-29.82,25.66,15.48,43.86,26.25,68.04,5.09,11.43-6.9,18.8-4.09,29.51,1.86,7.09,11.79,14.34,10.08,21.96-6.17,27.6-83.38,32.25-73.81,69.85,7.54,29.6,58.17,46.27,82.63,54.23,33.73,10.98,62.25,9.01,96.46,12.29,33.34,3.19,66.17,11.06,99.53,13.48,31.52,2.28,63.29-1,94.86-1.22,28.53-.2,120.69,3.31,77.83-50.43-16.12-20.21-48.83-27.66-71.99-34.96-49.18-15.5-175.1-36.21-209.21-70.71-8.53-8.63-4.89-16.2-4.32-26.97.67-12.61-5.69-25.52,3.17-36.66,16.39-20.6,85.78-30.19,29.98-65.94-7-4.48-14.55-8.12-22.08-11.61-12.68-5.87-25.66-11.19-38.8-15.95l5.71,11.14Z" />
                        <path class="cls-51" fill="#37433d" opacity=".25" mix-blend-mode="multiply" d="M515.91,604.3s211.71-92.9,488.37-61.43c0,0-135.43-65.67-329.77-61.62-194.34,4.04-241.02,62.81-241.02,62.81l82.42,60.25Z" />
                        <path class="cls-41" fill="#ffda7b" d="M708.26,698.14l16.59-16.79s244.77,126,470,157.48c0,0-2.61,9.12-.86,23.19,0,0-184.33-31.44-485.73-163.88Z" />
                      </g>
                    </g>
                    <path class="cls-34" fill="#a5bcc7" opacity=".2" mix-blend-mode="overlay" d="M923.28,539.48s289.69,123.38,366.65,259.58c13.91,24.62-95.76-3.69-227.58-48.95-190.72-65.48-421.98-174.54-422.13-174.58-48.66-11.5,267.35-45.01,283.06-36.05Z" />
                    <g>
                      <path class="cls-31" fill="#000876" opacity=".8" d="M1083.89,677.92c45.75,12.19,76.96,44.38,69.64,71.84-7.32,27.45-50.4,39.85-96.15,27.65-45.75-12.19-76.96-44.38-69.64-71.84,7.32-27.46,50.4-39.85,96.15-27.65Z" />
                      <path class="cls-37" fill="#fff" opacity=".8" d="M1080.79,693c33.7,8.98,56.89,31.9,51.76,51.15-5.13,19.25-36.65,27.59-70.35,18.61-33.69-8.98-56.89-31.9-51.76-51.15,5.13-19.25,36.65-27.59,70.35-18.61Z" />
                      <path class="cls-27" fill="#c30000" opacity=".8" d="M1077.28,708.77c18.27,4.87,30.84,17.29,28.06,27.73-2.78,10.44-19.87,14.96-38.14,10.09-18.27-4.87-30.84-17.29-28.06-27.73,2.78-10.44,19.87-14.96,38.14-10.09Z" />
                    </g>
                    <g>
                      <g>
                        <path class="cls-40" fill="#678580" d="M814.84,605s29.22-29.33,75.59-6.64c0,0-25.07,18.7-75.59,6.64Z" />
                        <g class="cls-73" clip-path="url(#clippath-14)">
                          <path class="cls-30" fill="#526d69" d="M849.77,587.99s14,6.22,19.02,22.58c0,0,21.18-5.45,26.58-12.62,0,0-20.39-11.75-45.6-9.96Z" />
                          <path class="cls-25" fill="silver" d="M816.45,610.52c.1-1.73,33.49-32.55,76.14-6.41l5.25-5.13s-12.27-16.31-46.28-12.56c-34,3.75-41.74,19.88-41.74,19.88l6.63,4.22Z" />
                        </g>
                      </g>
                      <g>
                        <path class="cls-40" fill="#678580" d="M848.74,614.78s29.22-29.34,75.59-6.64c0,0-25.07,18.7-75.59,6.64Z" />
                        <g class="cls-71" clip-path="url(#clippath-15)">
                          <path class="cls-30" fill="#526d69" d="M883.67,597.77s14,6.22,19.03,22.58c0,0,21.18-5.45,26.58-12.62,0,0-20.39-11.75-45.6-9.96Z" />
                          <path class="cls-25" fill="silver" d="M850.35,620.3c.1-1.73,33.49-32.55,76.14-6.41l5.25-5.13s-12.27-16.31-46.28-12.56c-34,3.75-41.74,19.87-41.74,19.87l6.63,4.22Z" />
                        </g>
                      </g>
                    </g>
                    <g>
                      <path class="cls-22" fill="#a1a1a1" d="M634.79,636.53s-121.96,20.39-175.9,38.83c0,0,113.54-13.82,184.18-27.04,0,0,13.37-9.86-8.27-11.79Z" />
                      <path class="cls-22" fill="#a1a1a1" d="M655.38,649.19s-93.02,19.04-139.88,33.77c0,0,77.52-8.75,148.16-21.97,0,0,13.37-9.86-8.27-11.79Z" />
                      <path class="cls-13" fill="#d1d0cc" fill-rule="evenodd" d="M460.11,675.39s179.52-35.54,187.69-35.32c0,0-6.22-3.91-12.6-3.72-6.39.19-143.41,24.43-175.08,39.04Z" />
                      <path class="cls-13" fill="#d1d0cc" fill-rule="evenodd" d="M516.53,682.99s93.46-26.57,140.45-34.07c0,0,10.06,1.02,10.96,4.18.89,3.15-151.41,29.89-151.41,29.89Z" />
                    </g>
                  </g>
                  <polygon class="cls-6" fill="#465" points="930.97 263.69 948.44 174.94 953.67 180.69 938.24 269.1 930.97 263.69" />
                  <g>
                    <g>
                      <path class="cls-6" fill="#465" d="M695.18,285.66s63.79-74.66,153.33-57.06c89.54,17.61,100.74,45.68,114.68,59.67,0,0-100.51,34.86-178.6,28.36-69.86-5.82-89.41-30.97-89.41-30.97Z" />
                      <g class="cls-68" clip-path="url(#clippath-16)">
                        <path class="cls-6" fill="#465" d="M756.24,237.34l33.23,3.48s16.02-14.88,60.92-5.86c44.9,9.02,89.28,37.26,94.5,45.59l-131.1,29.13s87.38.96,137.53-24.07l-5.77-19.33s-13.48-19.59-61.74-32.93c-14.04-3.88-31.03-7.23-51.49-9.42-42.25-4.52-76.09,13.4-76.09,13.4Z" />
                      </g>
                    </g>
                    <path class="cls-5" fill="#97afbb" d="M703.42,284.5s44.47-40.13,57.48-32.68c9.04,5.18-35.71,45.6-35.71,45.6l-21.76-12.92Z" />
                    <g>
                      <path class="cls-5" fill="#97afbb" d="M733.24,299.7l39.2-43.28,14.76-4.68,10.91,60.29s-36.72,1.93-64.87-12.33Z" />
                      <g class="cls-65" clip-path="url(#clippath-17)">
                        <polygon class="cls-45" fill="#787878" points="752.57 283.72 787.8 282.98 798.75 295.49 786.83 315.91 754.02 311.9 733.54 303.06 752.57 283.72" />
                      </g>
                    </g>
                    <g>
                      <path class="cls-5" fill="#97afbb" d="M784.44,239.47l8.91,11.28,13.84,60.25s114.61-10.33,140.72-26.99l-2.35-9.43s-2.02-2.08-6.19-5.33c-11.46-8.94-39.14-26.77-85.52-34.75-63.25-10.87-69.4,4.97-69.4,4.97Z" />
                      <g class="cls-69" clip-path="url(#clippath-18)">
                        <path class="cls-39" fill="#e4e4e4" d="M752.34,270.8s130.02-6.45,170.6,1.91c0,0-9.85-36.02-104.46-35.83-59.89.12-66.14,33.92-66.14,33.92Z" />
                        <path class="cls-47" fill="#545454" d="M861.52,246.34l5.74,35.01-4.8,18.27c-.98,4.58,73.94-9.29,81.58-18.14,0,0-26.67-39.12-82.52-35.15Z" />
                        <path class="cls-8" fill="#4d4d4d" d="M804.36,282.07s52.49-7.22,77.23-5.54l-6.7,23.92-76.16,10.28-24.74-23.77s18.64-3.56,30.37-4.89Z" />
                        <polygon class="cls-4" fill="#353431" points="842.84 301.81 861.52 246.34 870.31 250.11 875.85 299.45 842.84 301.81" />
                        <g>
                          <path class="cls-45" fill="#787878" d="M816.86,245.88c8.58-4,22.94-.12,22.88,14.48-.05,14.6-3.18,15.47-3.18,15.47l13.08,14.13-.44,11.58-44.89,7.07-14.57-9.79,3.43-9.57s16.42-7.32,23.4-11.3l1.3-3.67s-7.7-.35-7.53-3.59c.17-3.24-2.73-20.5,6.52-24.81Z" />
                          <g class="cls-66" clip-path="url(#clippath-19)">
                            <path class="cls-43" fill="#918b8b" d="M810.58,276.22s11.14,6.49,18.35,4.95c7.22-1.54,11.47-6.06,11.47-6.06,0,0-9.76-5.67-16.37-4.27-6.61,1.4-13.45,5.38-13.45,5.38Z" />
                            <path class="cls-18" fill="#5e5252" d="M806.25,251.75s-.32,2.83,4.1,4.72c4.35,1.86,13.42,2.77,14.66,3.15,2.49.76,1.38,11.15,1.38,11.15,0,0,13.19,7.59,16.09,2.74,2.9-4.85,8.93-26.8-6.93-30.44-15.86-3.64-29.3,8.69-29.3,8.69Z" />
                            <path class="cls-18" fill="#5e5252" d="M842.84,278.99s-12.81,5.68-11.49,26.63c1.32,20.96-15.85,3.52-15.85,3.52,0,0,6.81-31.63,16.99-37.01l10.35,6.86Z" />
                            <path class="cls-18" fill="#5e5252" d="M816.06,276.76s-10.75,15.2-10.95,30.7c-.2,15.5-6.58-20.85-6.58-20.85l17.53-9.84Z" />
                            <polygon class="cls-18" fill="#5e5252" points="810.5 264.51 819.83 266.97 831.55 265.12 831.23 269.97 818.54 275.6 809.65 272.65 810.5 264.51" />
                          </g>
                        </g>
                      </g>
                    </g>
                    <polygon class="cls-39" fill="#e4e4e4" points="795.73 294.2 785.73 312.39 800.43 313.48 795.73 294.2" />
                    <polygon class="cls-39" fill="#e4e4e4" points="727.18 299.01 758.57 265.55 761.66 258.94 724.53 297.49 727.18 299.01" />
                    <path class="cls-39" fill="#e4e4e4" d="M702.71,284.4s33.52-33.85,52.94-33.36l-23.91,13.75-25.69,21.91-3.34-2.29Z" />
                    <polygon class="cls-6" fill="#465" points="764.87 261.74 795.92 276.95 795.79 283.36 760.39 268.42 764.87 261.74" />
                    <polygon class="cls-10" fill="#828d87" points="749.01 255.69 740.88 273.89 750.17 266.81 755.95 251.24 749.01 255.69" />
                    <path class="cls-39" fill="#e4e4e4" d="M808.07,282.26s98.68,4.6,130.73-4.39c0,0-31.39-24.4-59.19-26.57,0,0,32.94-5.23,65.47,27.58l-4.6,6.03s-88.15,10.25-132.41-2.65Z" />
                    <g>
                      <path class="cls-1" fill="#3e3e3e" d="M815.13,261.97s3.59,5.4,5.59,5.7c2,.3,7.26-1.64,7.26-1.64,0,0-.54-6.74-1.73-7.02-1.18-.28-9.59-1.34-9.59-1.34l-.97.99-.27-1.09-5.27-1.37s-1.55,6.7-1.14,7.54c.41.84.92,1.44.92,1.44l1.13.2,1.09.03,2.96-3.43Z" />
                      <polyline class="cls-2" fill="#616161" points="817.18 259.41 825.67 260.33 826.74 265.3 820.75 266.4 816.89 261.5 817.18 259.41 815.04 259.24 814.73 261.14 812.11 264.12 810.57 264.01 810.14 262.98 811.08 257.82 815.04 259.24" />
                    </g>
                  </g>
                  <g>
                    <path class="cls-7" fill="#7b9aa9" d="M1308,304.34s107.18-28.15,164.33.01c46.43,22.88,160.97,65.86,118.34,70.51-42.64,4.64-156.31-5.97-282.66-70.52Z" />
                    <g class="cls-75" clip-path="url(#clippath-20)">
                      <path class="cls-9" fill="#b0c3cc" d="M1318.1,298.72s109.14,54.96,235.68,79.71c0,0,53.69,7.08,54.01-6.94.32-14.02-117.26-67.23-158.09-79.64-40.82-12.41-131.6,6.87-131.6,6.87Z" />
                      <path class="cls-33" fill="#637f76" d="M1543.98,329.57c-.22-.68-4.93-1.19-5.34-1.28-6.03-1.35-12.09-2.55-18.17-3.66-18.46-3.38-37.03-6.28-55.69-8.36-6.02-.67-16.67-3.45-22.31.17-9.31,5.98,19.45,14.53,9.71,23.76-6.25,5.93-20.75,6.54-28.73,9.25-2.98,1.01-8.74,3.4-7.46,7.55,3.49,11.27,34.37,24.29,44.05,28.1,48.07,18.93,106.61,23.19,157.42,16.11,6.83-.95,13.7-2.27,20.23-4.49,4.65-1.58,9.04-3.59,13.09-6.4,33.16-22.94-20.78-43.85-40.24-48.61-13.87-3.4-27.86-6-41.88-8.67-4.9-.94-24.69-3.47-24.69-3.47Z" />
                    </g>
                  </g>
                  <g>
                    <g>
                      <path class="cls-15" fill="#dadada" d="M170.13,333.57s59.34,83.85-1.19,171.06c0,0-129.09-38.02-128.65-81.78.47-47.32,103.12-84.75,129.84-89.28Z" />
                      <g class="cls-76" clip-path="url(#clippath-21)">
                        <path class="cls-20" fill="#b8b8b8" d="M21.07,420.5s62.54,55.43,201.5,27.86l-52.74,76.76S27.41,478.94,21.07,420.5Z" />
                        <path class="cls-35" fill="#fff" opacity=".6" d="M68.6,394.83s91.75-63.97,104.37-38.86c12.62,25.11-54.02,37.06-104.37,38.86Z" />
                      </g>
                    </g>
                    <g>
                      <path class="cls-14" fill="#616161" opacity=".68" d="M55.55,191.87s-30.3,92.29,32.16,164.7l16.57-21.4s-53.09-67.52-48.73-143.3Z" />
                      <path class="cls-14" fill="#616161" opacity=".68" d="M101.51,491.93s-34.23,105.37,22.91,177.89c16.4,4.26,29.85,2.87,40.7-3.49,0,0-66.04-66.23-63.61-174.4Z" />
                      <path class="cls-14" fill="#616161" opacity=".68" d="M144.82,468.36s45.7,97.47,117.52,125.49c0,0,41.09-58.35,46.29-112.35,0,0-42.71,47.39-79.55,35.13-36.84-12.25-84.26-48.28-84.26-48.28Z" />
                      <path class="cls-86" fill="#ffbd00" opacity=".39" d="M123.81,154.98l.24-8.17c-30.6,9.77-59.53,31.9-84.13,64.96-16.16,21.71-29.59,46.99-39.91,74.71l5.62,7.02c24.88-69.62,68.32-121.27,118.19-138.51Z" />
                      <path class="cls-86" fill="#ffbd00" opacity=".39" d="M285.36,228.72c-23.61-43.02-55.41-71.54-91.33-82.55l-2.28,7.31c34.02,10.42,64.28,37.7,86.9,78.92,11.17,20.35,19.92,43.11,26.13,67.49l6.87-3.99c-6.33-24.22-15.13-46.86-26.29-67.19Z" />
                      <g>
                        <path class="cls-86" fill="#ffbd00" opacity=".39" d="M131.71,667.77c-16.8-1.16-32.97-6.26-48.09-14.95l-.84,8.3c15.25,8.25,31.51,13.11,48.4,14.28,2.66.18,5.31.27,7.96.27,16.29,0,32.4-3.46,47.97-10.17l-2.45-7.3c-17.18,7.5-35.01,10.79-52.95,9.56Z" />
                        <path class="cls-86" fill="#ffbd00" opacity=".39" d="M259.36,605c28.28-37.99,48.2-86.89,57.75-140.73l-7.59-.97c-9.36,52.53-28.78,100.16-56.3,137.13-1.12,1.5-2.25,2.98-3.39,4.44l4.84,6.2c1.58-1.99,3.14-4,4.68-6.07Z" />
                      </g>
                    </g>
                  </g>
                </g>
              </g>
            </g>
          </g>
        </svg>
        <div v-for="loc in planeLocations">
          <div v-if="loc.modes.includes(currentMode)" class="absolute -translate-x-1/2 -translate-y-1/2 text-center text-[2.5vw] md:text-[1.6vw] leading-tight" :style="{left: loc.x, top: loc.y}">
            <div>{{ loc.display }}</div>
            <div>{{ hitProportion[modes[currentMode].locations.findIndex(l => l === loc.name)] }}%</div>
          </div>
        </div>
      </div>

    </div>
  </div>
</template>

<script setup>
import { computed, onMounted, ref, watch } from "vue";

const modes = {
  Beginner: {
    name: "Beginner",
    inputMax: 10,
    locations: ['tail', 'cockpit'],
    icon: 'fa-plane',
    colour: '#14b8a6',
    accent: 'accent-teal-600'
  },
  Intermediate: {
    name: "Intermediate",
    inputMax: 5,
    locations: ['tail', 'rearFusalage', 'fuelTank', 'engines', 'wings', 'cockpit'],
    icon: 'fa-plane-alt',
    colour: '#0ea5e9',
    accent: 'accent-sky-600'
  },
  Advanced: {
    name: "Advanced",
    inputMax: 3,
    locations: ['tail', 'rudder', 'elevator', 'rearFusalage', 'midsection', 'fuelTank', 'engines', 'wings', 'winglet', 'aileron', 'flaps', 'cockpit'],
    icon: 'fa-fighter-jet',
    colour: '#8b5cf6',
    accent: 'accent-violet-600'
  }
}

const planeLocations = [
  { name: 'tail', display: "Tail", modes: ["Beginner", "Intermediate", 'Advanced'], x: '71%', y: '0' },
  { name: 'cockpit', display: "Cockpit", modes: ["Beginner", "Intermediate", 'Advanced'], x: '40%', y: '15%' },
  { name: 'rearFusalage', display: "Rear Fusalage", modes: ["Intermediate", 'Advanced'], x: '56%', y: '5%' },
  { name: 'fuelTank', display: "Fuel Tank", modes: ["Intermediate", 'Advanced'], x: '4%', y: '25%' },
  { name: 'engines', display: "Engines", modes: ["Intermediate", 'Advanced'], x: '6%', y: '70%' },
  { name: 'wings', display: "Wings", modes: ["Intermediate", 'Advanced'], x: '40%', y: '90%' },
  { name: 'rudder', display: "Rudder", modes: ['Advanced'], x: '86%', y: '10%' },
  { name: 'elevator', display: "Elevator", modes: ['Advanced'], x: '90%', y: '32%' },
  { name: 'midsection', display: "Midsection", modes: ['Advanced'], x: '25%', y: '85%' },
  { name: 'winglet', display: "Winglet", modes: ['Advanced'], x: '55%', y: '100%' },
  { name: 'aileron', display: "Aileron", modes: ['Advanced'], x: '77%', y: '77%' },
  { name: 'flaps', display: "Flaps", modes: ['Advanced'], x: '67%', y: '61%' },
]
const squadronSize = 100
const baseHits = 1.14


const currentMode = ref('Advanced')
const inputs = ref({
  tail: '0',
  rudder: '0',
  elevator: '0',
  rearFusalage: '0',
  midsection: '0',
  fuelTank: '0',
  engines: '0',
  wings: '0',
  winglet: '0',
  aileron: '0',
  flaps: '0',
  cockpit: '0'
})
const results = ref([])
const extraArmour = ref(0)

const sd = computed(() => {
  return modes[currentMode.value].inputMax / 8
})

const sumInputs = computed(() => {
  return modes[currentMode.value].locations.reduce((acc, val) => acc + parseInt(inputs.value[val]), 0) / 10
})

const vulnerability = computed(() => {
  return modes[currentMode.value].locations.map((l, i) => (i + 1) / (modes[currentMode.value].locations.length + 1))
})

const armour = computed(() => {
  return modes[currentMode.value].locations.map(l => parseInt(inputs.value[l]) / 10 + vulnerability.value[0] * modes[currentMode.value].inputMax / 4)
})

const hitsLambda = computed(() => {
  return baseHits * armour.value.reduce((acc, val) => acc + val, 0)
})

const probKill = computed(() => {
  let probKill = []
  for (let i = 0; i < modes[currentMode.value].locations.length; i++) {
    probKill.push(cdf(armour.value[i], vulnerability.value[modes[currentMode.value].locations.length - 1 - i] * modes[currentMode.value].inputMax, sd.value) - cdf(armour.value[i] - sd.value, vulnerability.value[[modes[currentMode.value].locations.length - 1 - i]] * modes[currentMode.value].inputMax, sd.value))
  }
  return probKill
})

const numReturned = computed(() => {
  return Math.round(results.value.reduce((acc, val) => acc + val.length, 0) / squadronSize)
})

const numHits = computed(() => {
  return Math.round(results.value.reduce((acc, val) => acc.concat(val.flat()), []).reduce((acc, val) => acc + val, 0) / squadronSize)
})

const hitsPerPlane = computed(() => {
  return Math.round(numHits.value / numReturned.value * 10) / 10
})

const hitProportion = computed(() => {
  const totalHits = results.value.reduce((acc, val) => acc.concat(val.flat()), []).reduce((acc, val) => acc + val, 0)
  return modes[currentMode.value].locations.map((l, i) => {
    let hits = results.value.flat().reduce((acc, val) => acc + val[i], 0)
    return Math.round(hits / totalHits * 10000) / 100
  }).sort((a, b) => a - b)
})

function mission () {
  let planes = []
  for (let i = 0; i < squadronSize; i++) {
    let eachPlane = []
    const randPicks = sample([...Array(squadronSize * modes[currentMode.value].locations.length).keys()], randomPoisson(hitsLambda.value))
    for (let j = 0; j < modes[currentMode.value].locations.length; j++) {
      let locationHits = randPicks.filter(p => p >= j * (squadronSize - 1) && p < (j + 1) * (squadronSize - 1))
      eachPlane.push(locationHits.length)
    }
    planes.push(eachPlane)
  }

  const altProbKill = probKill.value.map(p => 1 - p)

  const planeKilledStatues = planes.map(plane => {
    return Math.random() < plane.map((loc, lIndex) => {
      return altProbKill[lIndex] ** loc
    }).reduce((acc, val) => acc * val, 1)
  })

  return planes.filter((p, index) => !planeKilledStatues[index])
}

function cdf (x, mean, std) {
  let X = (x - mean) / std
  let T = 1 / (1 + 0.2316419 * Math.abs(X))
  let D = 0.3989423 * Math.exp(-X * X / 2)
  let prob = D * T * (0.3193815 + T * (-0.3565638 + T * (1.781478 + T * (-1.821256 + T * 1.330274))))
  if (X > 0) {
    prob = 1 - prob
  }
  return prob
}

function randomPoisson (lambda) {
  let L = Math.exp(-lambda)
  let k = 0
  let p = 1
  do {
    k++
    p *= Math.random()
  } while (p > L)
  return k - 1
}

function sample (array, n) {
  let result = []
  for (let i = 0; i < n; i++) {
    result.push(array[Math.floor(Math.random() * array.length)])
  }
  return result
}

function getResults () {
  extraArmour.value = sumInputs.value
  let missions = []
  for (let i = 0; i < squadronSize; i++) {
    missions.push(mission())
  }
  results.value = missions
}

onMounted(() => {
  getResults()
})

watch(currentMode, () => {
  for (const key in inputs.value) {
    inputs.value[key] = 0
  }
  getResults()
})
</script>


<style>
</style>